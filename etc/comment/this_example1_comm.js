// ===============================
// 1ï¸âƒ£ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œì—ì„œì˜ this
// ===============================

function f1() {
  // Node.js í™˜ê²½ì—ì„œ
  // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ this === global ê°ì²´
  console.log(this);
}

f1(); // ğŸ‘‰ this === global


// ===============================
// 2ï¸âƒ£ ê°ì²´ ë©”ì„œë“œ + ë‚´ë¶€ í•¨ìˆ˜ë“¤
// ===============================

const obj = {
  f2: function () {
    // f2ëŠ” objì˜ ë©”ì„œë“œ
    // ë”°ë¼ì„œ ì—¬ê¸°ì„œ this === obj

    const ff = () => {
      // í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìê¸° ìì‹ ì˜ thisê°€ ì—†ìŒ
      // â†’ ë°”ê¹¥ ìŠ¤ì½”í”„(this)ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
      console.log(this);
    };
    ff(); // ğŸ‘‰ this === obj

    const fff = function () {
      // ì¼ë°˜ í•¨ìˆ˜
      // í˜¸ì¶œ ì‹œì ì— ê°ì²´ê°€ ë¶™ì–´ ìˆì§€ ì•ŠìŒ
      // â†’ this === global
      console.log(this);
    };
    fff(); // ğŸ‘‰ this === global
  },
};

obj.f2();

// ===============================
// 3ï¸âƒ£ ê°ì²´ ë©”ì„œë“œ ë‹¨ë… ì˜ˆì œ
// ===============================

const obj2 = {
  name: 'licat',
  f: function () {
    // fëŠ” obj2ì˜ ë©”ì„œë“œ
    // í˜¸ì¶œ ì‹œì ì— obj2ê°€ ì•ì— ë¶™ì–´ ìˆìŒ
    console.log(this);
  },
};

obj2.f(); // ğŸ‘‰ this === obj2

// ===============================
// 4ï¸âƒ£ ìƒì„±ì í•¨ìˆ˜ì™€ this
// ===============================

function Person(name) {
  // new í‚¤ì›Œë“œì™€ í•¨ê»˜ í˜¸ì¶œë˜ë©´
  // thisëŠ” "ìƒˆë¡œ ë§Œë“¤ì–´ì§ˆ ê°ì²´"ë¥¼ ê°€ë¦¬í‚´
  this.name = name;
  console.log(this);
}


const person1 = new Person('licat');
// ğŸ‘‰ { name: 'licat' }

const person2 = new Person('mura');
// ğŸ‘‰ { name: 'mura' }

// ===============================
// 5ï¸âƒ£ new ì—†ì´ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ (ì¤‘ìš”í•œ í•¨ì •)
// ===============================

const value = Person('test'); // ê·¸ëƒ¥ í•¨ìˆ˜ í˜¸ì¶œë¡œ ì²˜ë¦¬ë¨
/*  global.name = 'test'
    value === undefined

  1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ      â†’ global (Node)
  2. ê°ì²´.ë©”ì„œë“œ()       â†’ ê°ì²´
  3. í™”ì‚´í‘œ í•¨ìˆ˜         â†’ ìƒìœ„ this
  4. new ìƒì„±ì í˜¸ì¶œ     â†’ ìƒˆë¡œ ìƒì„±ëœ ê°ì²´
  5. ìƒì„±ì + new ì—†ìŒ   â†’ global (ë²„ê·¸ ì›ì¸)

*/